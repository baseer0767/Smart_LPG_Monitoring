import React from "react";
import { motion } from "framer-motion";

const LPGCylinderLevel = ({
  level,
  showPercentage = true,
  height = 300,
  width = 150,
}) => {
  // Ensure level is between 0 and 100
  const gasLevel = Math.max(0, Math.min(100, level));

  // Determine color based on level
  const getColor = (level) => {
    if (level <= 30) return "#DB2D00"; // Red
    if (level <= 70) return "#FFC800"; // Yellow/Amber
    return "#2C8500"; // Green
  };

  const fillColor = getColor(gasLevel);

  return (
    <div className="flex flex-col items-center">
      {/* Cylinder Container */}
      <div className="relative" style={{ width, height }}>
        {/* Animated Gas Fill - positioned behind the SVG */}
        <div
          className="absolute"
          style={{
            left: "23.5%",
            top: "28.7%",
            width: "53%",
            height: "47.7%",
            borderRadius: "30px",
            overflow: "hidden",
          }}
        >
          <motion.div
            className="absolute bottom-0 left-0 right-0"
            style={{
              backgroundColor: fillColor,
              borderRadius: "0 0 6px 6px",
            }}
            initial={{ height: "0%" }}
            animate={{ height: `${gasLevel}%` }}
            transition={{
              duration: 1,
              ease: "easeInOut",
            }}
          />
        </div>

        {/* SVG Container */}
        <svg
          width={width}
          height={height}
          viewBox="0 0 200 300"
          className="absolute top-0 left-0"
        >
          {/* Only the main outline path */}
          <path
            d="M0 0 C1.48306641 0.02126953 1.48306641 0.02126953 2.99609375 0.04296875 C3.98738281 0.04941406 4.97867188 0.05585938 6 0.0625 C8.43359375 0.23046875 8.43359375 0.23046875 9.43359375 1.23046875 C12.08815568 1.33142439 14.71614551 1.37017873 17.37109375 1.36328125 C18.56400024 1.36471634 18.56400024 1.36471634 19.78100586 1.36618042 C21.46565835 1.36686218 23.15031346 1.36500818 24.83496094 1.36083984 C27.42258572 1.3554915 30.01003691 1.36078494 32.59765625 1.3671875 C34.23046914 1.36652672 35.86328191 1.36524555 37.49609375 1.36328125 C38.27525146 1.36530548 39.05440918 1.36732971 39.85717773 1.36941528 C43.44153575 1.68886455 43.44153575 1.68886455 46.43359375 0.23046875 C48.24286656 0.10559117 50.05755482 0.05476029 51.87109375 0.04296875 C52.85980469 0.02878906 53.84851563 0.01460937 54.8671875 0 C57.43359375 0.23046875 57.43359375 0.23046875 59.43359375 2.23046875 C59.6088443 5.02731672 59.66502564 7.72374955 59.62890625 10.51953125 C59.62607635 11.33795502 59.62324646 12.15637878 59.62033081 12.99960327 C59.60911907 15.61837268 59.58401304 18.23680239 59.55859375 20.85546875 C59.54856522 22.62890132 59.53943915 24.40233924 59.53125 26.17578125 C59.50917653 30.52747501 59.47464019 34.87891425 59.43359375 39.23046875 C60.36300781 39.52695313 61.29242188 39.8234375 62.25 40.12890625 C69.19355827 42.53146261 74.29989575 47.24299897 78.43359375 53.23046875 C80.10137807 57.47084385 80.68567653 61.01122829 80.69429016 65.55477905 C80.70137497 66.80517471 80.70845978 68.05557037 80.71575928 69.34385681 C80.71346579 70.71670569 80.71095614 72.08955422 80.70825195 73.46240234 C80.7126025 74.91827149 80.7177868 76.37413835 80.72373962 77.83000183 C80.73710473 81.77429868 80.73771102 85.71849955 80.73517632 89.66281462 C80.73410482 92.9604 80.73899463 96.25796611 80.74378175 99.55554736 C80.75486855 107.33815307 80.75531914 115.12071052 80.74926758 122.90332031 C80.74322916 130.92063232 80.75553729 138.93776877 80.77683765 146.95505083 C80.79447633 153.84866939 80.80045139 160.74223219 80.7971999 167.63587248 C80.79539035 171.74857269 80.79799032 175.86114768 80.81191444 179.97382736 C80.82452497 183.84316135 80.82251842 187.71222252 80.80950356 191.58155251 C80.80714514 192.99724865 80.80984603 194.41296419 80.81812668 195.82863808 C80.867865 204.99695081 80.77087049 212.98786676 74.43359375 220.23046875 C74.76359375 220.89046875 75.09359375 221.55046875 75.43359375 222.23046875 C75.60844206 224.51782855 75.70079424 226.81188318 75.74609375 229.10546875 C75.80216797 230.95785156 75.80216797 230.95785156 75.859375 232.84765625 C75.43359375 236.23046875 75.43359375 236.23046875 73.9765625 238.48828125 C68.19843891 242.44687284 61.31764146 243.73327144 54.43359375 244.41796875 C53.6537915 244.49692383 52.87398926 244.57587891 52.07055664 244.65722656 C-0.63647855 249.22711495 -0.63647855 249.22711495 -18.56640625 239.23046875 C-21.02699452 235.53958635 -20.80419601 233.61939333 -20.75390625 229.23046875 C-20.74423828 227.37421875 -20.74423828 227.37421875 -20.734375 225.48046875 C-20.56640625 222.23046875 -20.56640625 222.23046875 -19.56640625 219.23046875 C-20.46359375 218.11671875 -20.46359375 218.11671875 -21.37890625 216.98046875 C-26.88327659 210.06068889 -25.85794435 201.50293254 -25.84106445 193.08447266 C-25.84541646 191.64978267 -25.85060124 190.21509501 -25.85655212 188.78041077 C-25.86990135 184.89808703 -25.87052531 181.0158609 -25.86798882 177.1335187 C-25.86691626 173.88568386 -25.87180982 170.63786854 -25.87659425 167.39003789 C-25.88767552 159.72387749 -25.88813473 152.05776609 -25.88208008 144.39160156 C-25.87604191 136.49868766 -25.88835043 128.60595209 -25.90965015 120.7130686 C-25.92729817 113.92217332 -25.93326243 107.13133463 -25.9300124 100.34041727 C-25.92820437 96.29085651 -25.93078752 92.24142296 -25.94472694 88.19188309 C-25.9573528 84.38162726 -25.95531659 80.57164826 -25.94231606 76.76139641 C-25.93996097 75.36869524 -25.94264641 73.97597429 -25.95093918 72.58329582 C-25.99841002 63.98646534 -25.9237022 55.97237013 -20.8046875 48.7421875 C-10.76340839 39.23046875 -10.76340839 39.23046875 -4.56640625 39.23046875 C-4.57687988 38.12010254 -4.58735352 37.00973633 -4.59814453 35.86572266 C-4.63428574 31.75458996 -4.65728521 27.64347136 -4.67626953 23.53222656 C-4.68634056 21.75127808 -4.6999981 19.97034618 -4.71728516 18.18945312 C-4.74148538 15.63277092 -4.75287809 13.0763069 -4.76171875 10.51953125 C-4.77204132 9.72052399 -4.78236389 8.92151672 -4.79299927 8.09829712 C-4.79339851 6.14089655 -4.68881694 4.18403798 -4.56640625 2.23046875 C-2.56640625 0.23046875 -2.56640625 0.23046875 0 0 Z M-0.56640625 3.23046875 C-1.93957713 4.37634976 -1.93957713 4.37634976 -1.67993164 7.46508789 C-1.67977256 8.89861001 -1.67408032 10.33213787 -1.6640625 11.765625 C-1.66264755 12.51887558 -1.6612326 13.27212616 -1.65977478 14.04820251 C-1.65416001 16.46316435 -1.64160508 18.87803476 -1.62890625 21.29296875 C-1.62389315 22.92643096 -1.61932991 24.55989461 -1.61523438 26.19335938 C-1.60418579 30.2057646 -1.58691131 34.21810116 -1.56640625 38.23046875 C1.07359375 37.57046875 3.71359375 36.91046875 6.43359375 36.23046875 C6.43359375 25.34046875 6.43359375 14.45046875 6.43359375 3.23046875 C4.12359375 3.23046875 1.81359375 3.23046875 -0.56640625 3.23046875 Z M48.43359375 3.23046875 C48.43359375 14.12046875 48.43359375 25.01046875 48.43359375 36.23046875 C51.07359375 36.89046875 53.71359375 37.55046875 56.43359375 38.23046875 C56.45824565 33.40666073 56.47643068 28.58288908 56.48852539 23.7590332 C56.49356549 22.11677411 56.50039753 20.47451952 56.5090332 18.83227539 C56.52111301 16.47671396 56.52682514 14.12121166 56.53125 11.765625 C56.53641129 11.02707779 56.54157257 10.28853058 56.54689026 9.52760315 C56.54708625 7.76148787 56.49554094 5.99549729 56.43359375 4.23046875 C56.10359375 3.90046875 55.77359375 3.57046875 55.43359375 3.23046875 C53.12359375 3.23046875 50.81359375 3.23046875 48.43359375 3.23046875 Z M10.43359375 5.23046875 C10.43359375 6.22046875 10.43359375 7.21046875 10.43359375 8.23046875 C21.65359375 8.23046875 32.87359375 8.23046875 44.43359375 8.23046875 C44.43359375 7.24046875 44.43359375 6.25046875 44.43359375 5.23046875 C33.21359375 5.23046875 21.99359375 5.23046875 10.43359375 5.23046875 Z M10.43359375 11.23046875 C10.43359375 19.15046875 10.43359375 27.07046875 10.43359375 35.23046875 C17.68417738 34.89387754 17.68417738 34.89387754 20.43359375 32.98046875 C21.76778308 30.64563742 21.64782061 28.87260007 21.43359375 26.23046875 C22.09359375 26.23046875 22.75359375 26.23046875 23.43359375 26.23046875 C23.10359375 22.60046875 22.77359375 18.97046875 22.43359375 15.23046875 C25.73359375 15.56046875 29.03359375 15.89046875 32.43359375 16.23046875 C32.43359375 19.95206348 32.24201583 22.69362216 31.43359375 26.23046875 C32.09359375 26.23046875 32.75359375 26.23046875 33.43359375 26.23046875 C33.63984375 27.34421875 33.84609375 28.45796875 34.05859375 29.60546875 C35.04650207 33.45607433 35.04650207 33.45607433 38.37109375 34.66796875 C41.40641239 35.32079451 41.40641239 35.32079451 44.43359375 35.23046875 C44.43359375 27.31046875 44.43359375 19.39046875 44.43359375 11.23046875 C33.21359375 11.23046875 21.99359375 11.23046875 10.43359375 11.23046875 Z M26.43359375 22.23046875 C26.76359375 23.22046875 27.09359375 24.21046875 27.43359375 25.23046875 C27.76359375 24.24046875 28.09359375 23.25046875 28.43359375 22.23046875 C27.77359375 22.23046875 27.11359375 22.23046875 26.43359375 22.23046875 Z M24.43359375 29.23046875 C24.43359375 29.89046875 24.43359375 30.55046875 24.43359375 31.23046875 C26.41359375 31.23046875 28.39359375 31.23046875 30.43359375 31.23046875 C30.43359375 30.57046875 30.43359375 29.91046875 30.43359375 29.23046875 C28.45359375 29.23046875 26.47359375 29.23046875 24.43359375 29.23046875 Z M-17.56640625 50.23046875 C-21.44708538 55.02491244 -21.77292439 58.88261391 -22.56640625 65.23046875 C10.43359375 65.23046875 43.43359375 65.23046875 77.43359375 65.23046875 C76.39784116 56.944448 74.94170566 52.18636205 68.6796875 46.69140625 C47.60971051 32.35150542 1.52867398 31.45063749 -17.56640625 50.23046875 Z M-22.56640625 68.23046875 C-22.23640625 113.77046875 -21.90640625 159.31046875 -21.56640625 206.23046875 C-10.02956866 208.53783627 0.8092857 209.38586779 12.53125 209.3984375 C13.64559921 209.4017659 14.75994843 209.4050943 15.9080658 209.40852356 C18.25177604 209.41355151 20.59549335 209.41593318 22.93920898 209.41577148 C26.46285261 209.41794822 29.98617755 209.43612219 33.50976562 209.45507812 C48.30231305 209.49166015 62.88615567 209.13995637 77.43359375 206.23046875 C77.43359375 160.69046875 77.43359375 115.15046875 77.43359375 68.23046875 C44.43359375 68.23046875 11.43359375 68.23046875 -22.56640625 68.23046875 Z M-21.56640625 209.23046875 C-19.15666041 214.87065373 -17.31227026 218.40977187 -11.56640625 221.23046875 C0.26456324 225.42611608 12.50022488 225.41714511 24.91088867 225.41577148 C27.10029863 225.41794808 29.28919482 225.43614745 31.47851562 225.45507812 C53.31467643 225.77659566 53.31467643 225.77659566 72.43359375 216.73046875 C74.36213431 214.31979306 74.84075291 213.14526952 75.43359375 210.23046875 C74.52874741 210.30070755 73.62390106 210.37094635 72.69163513 210.4433136 C63.48172232 211.11396004 54.33169008 211.39062614 45.09375 211.3984375 C43.67378204 211.40166673 42.25381438 211.40503191 40.83384705 211.40852356 C37.88344554 211.41444796 34.93307303 211.4163703 31.98266602 211.41577148 C28.25053483 211.41566986 24.51859382 211.42935294 20.78650761 211.44654369 C17.86151822 211.45779773 14.93657304 211.45968669 12.01156425 211.45916176 C9.98247226 211.46087321 7.95339404 211.47161629 5.92433167 211.48271179 C-3.38460172 211.46019146 -12.37286205 210.56593323 -21.56640625 209.23046875 Z M-16.56640625 222.23046875 C-17.85282694 224.80331013 -17.80643348 226.79575828 -17.87890625 229.66796875 C-17.91628906 230.63605469 -17.95367187 231.60414063 -17.9921875 232.6015625 C-17.80097395 235.28759299 -17.80097395 235.28759299 -15.9921875 236.9765625 C5.52297487 248.09792662 44.80941211 244.30817307 67.43359375 238.23046875 C70.62577689 236.98187805 70.62577689 236.98187805 72.43359375 234.23046875 C72.52918685 232.56602414 72.5634402 230.89764912 72.55859375 229.23046875 C72.56117188 228.34359375 72.56375 227.45671875 72.56640625 226.54296875 C72.58487277 224.20369909 72.58487277 224.20369909 71.43359375 222.23046875 C69.96993033 222.62800696 68.51270025 223.04928259 67.05859375 223.48046875 C66.24648437 223.7125 65.434375 223.94453125 64.59765625 224.18359375 C62.26584627 225.02905445 62.26584627 225.02905445 61.49609375 227.26171875 C60.43359375 229.23046875 60.43359375 229.23046875 57.89453125 230.05859375 C45.77231974 231.71580748 45.77231974 231.71580748 40.43359375 231.23046875 C39.96179688 230.73724121 39.49 230.24401367 39.00390625 229.73583984 C36.91816881 227.73635958 35.72332249 227.84404907 32.87109375 227.83203125 C31.55238281 227.82623047 31.55238281 227.82623047 30.20703125 227.8203125 C28.83417969 227.83771484 28.83417969 227.83771484 27.43359375 227.85546875 C26.51835938 227.84386719 25.603125 227.83226562 24.66015625 227.8203125 C23.78101563 227.82417969 22.901875 227.82804688 21.99609375 227.83203125 C21.19300781 227.83541504 20.38992187 227.83879883 19.5625 227.84228516 C16.95033501 228.31858588 16.16420324 229.28448466 14.43359375 231.23046875 C8.343479 232.41042848 0.20097027 231.32052657 -5.56640625 229.23046875 C-6.25604855 227.90887285 -6.92259001 226.5749846 -7.56640625 225.23046875 C-9.72921907 224.10790385 -9.72921907 224.10790385 -12.19140625 223.48046875 C-13.00867188 223.238125 -13.8259375 222.99578125 -14.66796875 222.74609375 C-15.29445313 222.5759375 -15.9209375 222.40578125 -16.56640625 222.23046875 Z M0.43359375 227.23046875 C0.43359375 227.56046875 0.43359375 227.89046875 0.43359375 228.23046875 C2.08359375 228.23046875 3.73359375 228.23046875 5.43359375 228.23046875 C5.43359375 227.90046875 5.43359375 227.57046875 5.43359375 227.23046875 C3.78359375 227.23046875 2.13359375 227.23046875 0.43359375 227.23046875 Z M49.43359375 227.23046875 C49.43359375 227.56046875 49.43359375 227.89046875 49.43359375 228.23046875 C51.08359375 228.23046875 52.73359375 228.23046875 54.43359375 228.23046875 C54.43359375 227.90046875 54.43359375 227.57046875 54.43359375 227.23046875 C52.78359375 227.23046875 51.13359375 227.23046875 49.43359375 227.23046875 Z"
            fill="none"
            stroke="#1F2020"
            strokeWidth="2"
            transform="translate(72.56640625,27.76953125)"
          />
          {/* Percentage Text - positioned in center of cylinder */}
          {showPercentage && (
            <motion.text
              x="100"
              y="161"
              textAnchor="middle"
              dominantBaseline="middle"
              fontSize="24"
              fontWeight="bold"
              fill="#00000"
              initial={{ scale: 0.8, opacity: 0 }}
              animate={{ scale: 1, opacity: 1 }}
              transition={{ duration: 0.6, delay: 0.5 }}
              className="font-gudea"
            >
              {Math.round(gasLevel)}%
            </motion.text>
          )}
        </svg>
      </div>
    </div>
  );
};

export default LPGCylinderLevel;
